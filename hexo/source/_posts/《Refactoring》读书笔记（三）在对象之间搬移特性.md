---
title: 《Refactoring》读书笔记（三）在对象之间搬移特性
categories:
  - 读书笔记
date: 2018-12-04 13:39:35
tags: Books
---

# 第七章 在对象之间搬移特性

## 7.1 Move Method（搬移函数）

### 概要

你的程序中，有个函数与其所驻类之外的另一个类进行更多交流：调用后者，或者被后者调用。

**在该函数最常引用的类中建立一个有着类似行为的新函数。将旧函数变成一个单纯的委托函数，或是将旧函数完全移除。**

### 动机

“搬移函数”是重构理论的支柱。通过这种手段，可以使系统中的类更简单，这些类最终也将更干净利落地实现系统交付的任务。

<!-- more -->

## 7.2 Move Field（搬移字段）

### 概要

在你的程序中，某个字段被其所驻类之外的另一个类更多地用到。

**在目标类新建一个字段，修改源字段的所有用户，令它们改用新字段。**

## 7.3 Extract Class（提炼类）

### 概要

某个类做了应该由两个类做的事。

**建立一个新类，将相关的字段和函数从旧类搬移到新类。**

## 7.4 Inline Class（将类内联化）

某个类没有做太多事情。

**将这个类的所有特性搬移到另一个类中，然后移除原类。**

## 7.5 Hide Delegate（隐藏“委托关系”）

### 概要

客户通过一个委托类来调用另一个对象。

**在服务类上建立客户所需的所有函数，用以隐藏委托关系。**

### 动机

即便将来发生委托关系上的变化，变化也将被限制在服务对象中，不会波及客户。

## 7.6 Remove Middle Man（移除中间人）

### 概要

某个类做了过多的简单委托动作。

**让客户直接调用委托类。**

### 动机

6个月前恰如其分的封装，现今可能就显得笨拙。重构的意义就在于：你永远不必说对不起——只要把出问题的地方修补好就行了。

## 7.7 Introduce Foreign Method（引入外加函数）

### 概要

你需要为提供服务的类增加一个函数，但你无法修改这个类。

**在客户类中建立一个函数，并以第一参数形式传入一个服务类实例。**

## 7.8 Introduce Local Extension（引入本地扩展）

### 概要

你需要为服务类提供一些额外函数，但你无法修改这个类。

**建立一个新类，使它包含这些额外函数。让这个扩展品成为源类的子类或包装类。**

